<!-- Usuário vai colocar qual linguagem programa -->

<!-- 1. Mostra repositórios relevantes para contribuir -->
<!-- https://api.github.com/search/repositories?q=topic:ruby&language=ruby&sort=stars&per_page=5 -->

<!-- 2. Pega os dados do Meetup e mostra no Google Maps  -->
<!-- http://api.meetup.com/find/events?text=pyladies&key=503b6f527ac484931d566d6b3c752&radius=global -->

<!-- 3. Mostrar tweets / pessoas mais relevantes -->
<!DOCTYPE html>
<html>
   <head>
      <title></title>
      <link rel="stylesheet" type="text/css" href="assets/lib/css/bootstrap-theme.min.css">
      <link rel="stylesheet" type="text/css" href="assets/lib/css/bootstrap.min.css">
      <style>
         #googlemaps { 
            height: 50%; 
            width: 100%; 
            position:absolute; 
            bottom: 0; 
            left: 0; 
            z-index: 0; /* Set z-index to 0 as it will be on a layer below the contact form */
         }
      </style>
   </head>
   <body>
      <div id="teste"></div>
      <div id="googlemaps"></div>
      <script>
         getGithubData();
         function getGithubData() {
            var xhr = new XMLHttpRequest();
            xhr.open("GET", "https://api.github.com/search/repositories?q=topic:python&language=python&sort=stars&per_page=5", true);

            xhr.addEventListener("load", function() {
               if (xhr.status == 200) {
                  var json = JSON.parse(xhr.responseText);
                  json.items.forEach(function(repositorio) {
                     console.log(repositorio);
                  });   
               } else {
                  console.log("Error");
               }
            });

            xhr.send();
         }

         function initMap() {
         	// To Do: Init map based on users' location
         	var centerCoordinates = {lat: 0, lng: 0};
         	var map = new google.maps.Map(document.getElementById('googlemaps'), {
         		zoom: 4,
         		center: centerCoordinates
         	});

         	var eventsData = getEventsData('python');
         	renderEventsData(map, eventsData);
         }

         /**
          * http://api.meetup.com/find/events?text=pyladies&key=503b6f527ac484931d566d6b3c752&radius=global
          */
         function getEventsData(searchText) {
         	return [
         		{
         			'group': {
         				'lat': 33.970001220703125,
						'lon': -118.23999786376953
         			}
         		},
         		{
         			'group': {
         				'lat': 9.920000076293945,
						'lon': 78.12000274658203
         			}
         		},
         		{
         			'group': {
         				'lat': 44.97999954223633,
						'lon': -93.26000213623047
         			}
         		},
         		{
         			'group': {
         				'lat': -17.81999969482422,
						'lon': 31.049999237060547
         			}
         		},
         		{
         			'group': {
         				'lat': 45.529998779296875,
						'lon': -122.62999725341797
         			}
         		},
               {
                  'group': {
                     'lat': 48.529998779296875,
                  'lon': -100.62999725341797
                  }
               },
               {
                  'group': {
                     'lat': 30.529998779296875,
                  'lon': -25.62999725341797
                  }
               },
               {
                  'group': {
                     'lat': 18.529998779296875,
                     'lon': -12.62999725341797
                  }
               },
         	]
         };

         function renderEventsData(map, eventsData) {
         	eventsData.forEach( function(element, index) {
         		var latLong = { lat: element.group.lat, lng: element.group.lon };
         		var marker = new google.maps.Marker({
         			position: latLong,
         			map: map
         		});

               var infowindow = new google.maps.InfoWindow({
                  content: "TESTE"
               });

               marker.addListener('click', function() {
                  infowindow.open(map, marker);
               });
         	});
         }
      </script>
      <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCg4n_6Yh91smoT21_RKSib-SXuqgXub0A&callback=initMap"></script>
   </body>
</html>